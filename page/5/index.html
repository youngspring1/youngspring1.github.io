<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>行行重行行</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="不想当建筑师的程序员不是优秀的运动员">
<meta property="og:type" content="website">
<meta property="og:title" content="行行重行行">
<meta property="og:url" content="https://youngspring1.github.io/page/5/index.html">
<meta property="og:site_name" content="行行重行行">
<meta property="og:description" content="不想当建筑师的程序员不是优秀的运动员">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="行行重行行">
<meta name="twitter:description" content="不想当建筑师的程序员不是优秀的运动员">
  
    <link rel="alternate" href="/atom.xml" title="行行重行行" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">行行重行行</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜尋"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://youngspring1.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2016-06-15-focus" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-06-15-focus/" class="article-date">
  <time datetime="2016-06-15T04:28:54.000Z" itemprop="datePublished">2016-06-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书/">读书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-06-15-focus/">训练专注力</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-专注的状态"><a href="#1-专注的状态" class="headerlink" title="1.专注的状态"></a>1.专注的状态</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">流体验，指的是当人完全专注地投入一项事业中时，可以从中体验到的极度的快乐。沉浸在这种快乐当中的感受与一般的高兴不同，它是一种难得的高峰体验。人们在这时注意力会完全集中在当下的事物上，感觉不到自我的存在，感觉时间在不知不觉中飞逝，创造力和灵感得到激发，内心非常专注而平静，没有任何冲突，并且从自己所从事的事物中获得极大的满足。所谓的“废寝忘食”，就是沉浸在心流体验中的人们会出现的忘我状态。经常拥有这种高峰体验，会让人的内心得到升华，工作和生活进入到更高的境界，也是人充分实现自身潜能的一个重要途径。</div><div class="line"></div><div class="line">这种高峰体验的出现又一些必要条件：首先就是需要人能毫无杂念地投入，全神贯注；另外，需要所做的事情和个人的能力很好地匹配，若是太过简单，人容易感觉无聊，太过复杂，人则容易感觉受挫；第三，人需要能在这个过程中不断地取得进展，比较明确的目标和及时的反馈都很重要，可以帮助人不断地调整自己的行动。有趣的是，人通常都是在非常积极地为事物努力的时候才会体验到这种极度的快乐。如果只是从事一些被动的活动，比如看电视等，哪怕它们会让人愉快，也不会激发心流。除此之外，精力涣散和心不在焉也会减少人们从事某项事物中获得的乐趣。</div></pre></td></tr></table></figure>
<h4 id="2-进入状态／保持状态"><a href="#2-进入状态／保持状态" class="headerlink" title="2.进入状态／保持状态"></a>2.进入状态／保持状态</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">程序员们都知道，任务切换需要耗费许多额外的花销，通俗地来讲，首先需要保存当前上下文以便下次能够顺利切换回来，然后要加载目标任务的上下文。如果一个系统不停地在多个任务之间来回倒腾，就会耗费大量的时间在上下文切换上，无形中浪费很多的时间。</div><div class="line"></div><div class="line">相比之下，如果只做一件任务，就不会有此损失。这就是为什么专注的人比不专注的人时间利用效率高得多的原因。任务切换的暗时间看似非常不明显，甚至很多人认为“多任务”是件很好的事情（有时候的确是），但日积月累起来就会发现，消耗在切换上的时间越来越多。</div><div class="line"></div><div class="line">另外，大脑开始一件任务的时候必须要有一定时间来“热身”，这个时间因人而异，并且可以通过练习来改变。举个例子，你看了一会书之后，忽然感到一阵无聊，忍不住打开浏览器，十分钟后你想起来还要继续看书，但要回复到当时理想的状态，却需要一段时间来努力去集中精力，把记忆中相关的知识全都激活起来，从而才能进入“状态”，因为你上了十分钟网之后这些记忆已经被抑制了。如果这个“热身”状态需要一刻钟，那么看似十分钟的上网闲逛其实就花费了二十五分钟。</div><div class="line"></div><div class="line">如果阅读的例子还不够生动，对于程序员来说其实有更好的例子：你写程序写得正high，忽然被叫去开了一通会，写到一半的代码搁在那儿。等你开完会回来你需要多久能够重新进入状态？又或者，你正在调试程序，你已经花了二十分钟的时间把与这个bug可能相关的代码前前后后都理解了一遍，心中构建了一个大致的地图，就在这时，呃，你又被叫去开了个会(:D)，开完会回来，可想而知，得花上一些时间来回想一下刚刚弄清的东西了。</div><div class="line"></div><div class="line">迅速进入状态的能力是可以锻炼的，根据我个人的经验，至少可以缩短到3-5分钟。但要想完全进入状态，却是很难在这么短的时间实现的。所谓完全进入状态，举个例子：你看了3个小时的书，或者调试了半个小时的程序之后，往往满脑子都是相关的东西，所有这些知识都处在活跃状态，换言之你大脑中所有相关的记忆神经网络都被激活了，要达到这样一种忘记时间流逝的“沉浸”状态（心理学上叫做“流体验”），不是三两分钟的事情。而一旦这种状态被破坏，无形间效率就会大打折扣。这也是为什么我总是倾向于创造大块的时间来阅读重要的东西，因为这样有利于“沉浸”进去，使得新知识可以和大脑中与其相关的各种既有的知识充分融合，关联起来，后者对于深刻的记忆非常有帮助。</div><div class="line"></div><div class="line">要充分利用暗时间，不仅要能够迅速进入状态，另一个很重要的习惯就是能够保持状态多久（思维体力）。</div><div class="line"></div><div class="line">能够迅速进入专注状态，以及能够长期保持专注状态，是高效学习的两个最重要习惯。</div><div class="line">值得庆幸的是，专注力和耐力与才能不同，可以通过训练于后天获得可以不断提升其资质。只要每天坐在书桌前，训练将意识倾注于一点，自然就能掌握。这同前面写过的强化肌肉的做法十分相似。每天不间断地写作集中意识去工作，这些非做不可----将这样的信息持续不断地传递给身体系统，让它牢牢地记住，再悄悄移动刻度，一点一点将极限值将上提升，注意不让身体发觉。这跟每天坚持慢跑，强化肌肉，逐步打造出跑步者的体型，乃是异曲同工。给它刺激，持续。再给它刺激，持续。这一过程当然需要耐心，不过一定会得到相应的回报。</div><div class="line"></div><div class="line">优秀的侦探小说家雷蒙德.钱德勒在私信中说过：“哪怕没有什么东西可写，我私吞也肯定在书桌前坐上好几个小时，独自一人集中精力。”他这么做是为了什么，我完全能理解。钱德勒通过这么做，来提高职业作家必需的膂力，静静地提高士气。这样一种日常训练对他必不可缺。</div><div class="line"></div><div class="line">我认为写作长篇小说是一种体力劳动。写文章属于脑力劳动，然而写出一本大部头来，更近于体力劳动。诚然，写书并不需要举起沉重的物体，也不需要飞速地奔来跑去，高高地蹿上跳下。世间的很多人似乎只看到表面，将作家的工作视为宁静而更改的书斋劳动，以为有了足以端起一只咖啡杯的力量，就能写小说了。试它一试，立即就会明白，写小说并非那么安逸的工作。坐在书桌前，将神经如同激光束一般集于一点，动用想象力，从“无”的地平线上催生出故事来，挑选出一个个正确的词语，让所有的流程准确无误----这样一种工作，与一般人想象的相比，更为长久地需要远为巨大的能量。这固然不必运动身体，劳筋动骨的劳动却在体内热火朝天地展开。固然，思索问题的是脑子，小说家却需披挂着叫“故事”的全副装备，动用全身进行思考，这要求作家彻底地驱使----在许多时候是奴役----肢体能力。</div></pre></td></tr></table></figure>
<h4 id="3-排除干扰"><a href="#3-排除干扰" class="headerlink" title="3.排除干扰"></a>3.排除干扰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">干吗还会欣羡我能坐稳在咖啡馆里呢？到咖啡馆原本就为着隔离而来，隔离自己的家，隔离善良的声音，隔离掉所有熟悉、舒适、温暖的东西；正在写长篇的小说家林俊颖一人独居，如今却也冲出到咖啡馆来，他笑着说，书架一直在那里叫你，你一碰到困难，借口翻翻资料，寻找感觉，接下来你就发现自己又埋进某本书、某部小说里两小时了。所以，所有像回事的作家最终几乎都在早上书写，趁着整个世界才刚醒来，还跟你暂时处在一种相互隔离的状态，你还有能力把它当在外头——就连海明威这种浮夸好热闹的人都告诉我们，在早晨进入写作之前，不做其他任何有企图心的事；纳博科夫一致工作到下午，知道黄昏散步时才找报纸看，才放世界溜进来；在淡水写作的舞鹤甚至不读报，他只在喂食镇上街猫时顺便瞄一眼头条，知道没发生战争，末日还没来就可以了。</div></pre></td></tr></table></figure>
<h4 id="4-养成习惯"><a href="#4-养成习惯" class="headerlink" title="4.养成习惯"></a>4.养成习惯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">书中主人翁流落赌城，在绝望时刻偶然从一个老头手上得到一个必然赢钱的赌方，但这个最后一定大赢的赌方非常诡异非常磨人，它必须先挨过一定阶段的输钱，只能输不能赢，而且明知是输亦一步也不能省——写小说的格林迷朱天心尤其喜欢这个例子，她在新小说顺利开笔之前，一样总要经历这同样的短则数日长可数星期的枯坐思索（在小说题材乃至内容已经完全锁定备妥的情况下），明明知道一定空手而回仍得每天带着书、草稿本和笔到写作的咖啡馆报到，她出门时的口头禅便是：“去输钱”。</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-06-15-focus/" data-id="cjr4zj3d7003fizw8ad4orr7p" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/专注/">专注</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-06-06-lonely" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-06-06-lonely/" class="article-date">
  <time datetime="2016-06-06T06:46:00.000Z" itemprop="datePublished">2016-06-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书/">读书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-06-06-lonely/">善哉行</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="善哉行"><a href="#善哉行" class="headerlink" title="善哉行"></a>善哉行</h2><h4 id="曹丕"><a href="#曹丕" class="headerlink" title="曹丕"></a>曹丕</h4><p>上山采薇，薄暮苦饥。</p>
<p>溪谷多风，霜露沾衣。</p>
<p>野雉群雊，猿猴相追。</p>
<p>还望故乡，郁何垒垒！</p>
<p>高山有崖，林木有枝。</p>
<p>忧来无方，人莫之知。</p>
<p>人生如寄，多忧何为？</p>
<p>今我不乐，岁月如驰。</p>
<p>汤汤川流，中有行舟。</p>
<p>随波转薄，有似客游。</p>
<p>策我良马，被我轻裘。</p>
<p>载驰载驱，聊以忘忧。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-06-06-lonely/" data-id="cjr4zj3d5003bizw8edh0ing7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/诗/">诗</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-05-24-R07" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-05-24-R07/" class="article-date">
  <time datetime="2016-05-23T17:18:29.000Z" itemprop="datePublished">2016-05-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据分析笔记/">数据分析笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-05-24-R07/">MIT:The Analytics Edge 笔记07－可视化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MIT课程 <a href="https://courses.edx.org/courses/course-v1:MITx+15.071x_3+1T2016/info" target="_blank" rel="external">15.071x The Analytics Edge</a> 第七单元的学习记录。</p>
<hr>
<h2 id="Visualization"><a href="#Visualization" class="headerlink" title="Visualization"></a>Visualization</h2><p>第七单元的主题是可视化。</p>
<h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><p>plot和ggplot2的比较<br>plot：只有简单的点和线，不容易添加其他元素。<br>ggplot2：引入图层，很容易添加其他元素   </p>
<h4 id="ggplot2"><a href="#ggplot2" class="headerlink" title="ggplot2"></a>ggplot2</h4><p>ggplot2三要素：</p>
<ol>
<li>Data<br> 数据，使用data.frame。</li>
<li>Aesthetic mapping<br> 指定如何将 data.frame里的变量映射到图形属性上。比如，颜色，形状，比例，x／y坐标，分组等等。</li>
<li>Geometric objects<br> 决定数据以什么样的形式显示。比如，点，线，箱线图，条形图，多边形等等。</li>
</ol>
<p>结合下面这条命令，参数WHO就是提供数据的data.frame，参数aes()就是Aesthetic mapping，后面用加号连结的类似geom_point()就是Geometric objects。</p>
<pre><code># 形式
# ggplot(data = NULL, mapping = aes(), ..., environment = parent.frame())
# 例子
ggplot(WHO, aes(x = GNI, y = FertilityRate, color = Region)) + geom_point()
</code></pre><p>ase()即可以作为ggplot()的参数，又可以作为geom_XXXX()的参数</p>
<h4 id="Aesthetic-mapping"><a href="#Aesthetic-mapping" class="headerlink" title="Aesthetic mapping"></a>Aesthetic mapping</h4><p>坐标相关</p>
<pre><code>aes(x, y, xmin, xmax, ymin, ymax, xend, yend)
# 当然就是x，y坐标分别指定data.frame的某一列
</code></pre><p>注：坐标相关的，一般作为ggplot()的参数，其他的都可以作为geom()的参数。   </p>
<h4 id="Geometric-objects"><a href="#Geometric-objects" class="headerlink" title="Geometric objects"></a>Geometric objects</h4><p>颜色相关</p>
<pre><code>aes(colour, fill, alpha)
# colour 颜色
# fill   填充指标，data.frame的某一列。也类似于分类，比如该列有两个因子，那么会用两种不同的颜色填充
# alpha  透明度，0到1之间的小数
</code></pre><p>分组相关</p>
<pre><code>aes(group)
# group 分组指标，可以指定为1，那所有数据都在1组。也可以指定data.frame的某一列
</code></pre><p>形态相关</p>
<pre><code>aes(linetype, size, shape)
# linetype 即lty，线段的类型
# size     点的大小，线的粗细。指定整数数值。
# shape    图形的类型
</code></pre><p>图形的类型，即geom_point(shape = n)中n的取值<br><img src="http://7xrjai.com1.z0.glb.clouddn.com/20160524-shapes.png" alt="shapes"></p>
<p>线段的类型，即geom_point(lty = n)中n的取值<br><img src="http://7xrjai.com1.z0.glb.clouddn.com/20160524-line-types.png" alt="line-types"></p>
<p>描绘形状</p>
<pre><code>geom_point()  点
geom_line()   线
geom_tile()   条形图
geom_bar()    直方图
geom_ploygen()多边形
</code></pre><p>注：<br>binwidth = 5 :粒度？<br>geom_bar(stat=”identity”) :use the value of the y variable as is<br>geom_histogram(position = “identity”) :not to stack the histograms</p>
<h3 id="2-实战"><a href="#2-实战" class="headerlink" title="2.实战"></a>2.实战</h3><h4 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h4><pre><code># Read in data
WHO = read.csv(&quot;WHO.csv&quot;)
str(WHO)

# Plot from Week 1
plot(WHO$GNI, WHO$FertilityRate)

# Let&apos;s redo this using ggplot 
# Install and load the ggplot2 library:
install.packages(&quot;ggplot2&quot;)
library(ggplot2)

# Create the ggplot object with the data and the aesthetic mapping:
scatterplot = ggplot(WHO, aes(x = GNI, y = FertilityRate))

# Add the geom_point geometry
scatterplot + geom_point()

# Make a line graph instead:
scatterplot + geom_line()

# Switch back to our points:
scatterplot + geom_point()

# Redo the plot with blue triangles instead of circles:
scatterplot + geom_point(color = &quot;blue&quot;, size = 3, shape = 17) 

# Another option:
scatterplot + geom_point(color = &quot;darkred&quot;, size = 3, shape = 8) 

# Add a title to the plot:
scatterplot + geom_point(colour = &quot;blue&quot;, size = 3, shape = 17) + ggtitle(&quot;Fertility Rate vs. Gross National Income&quot;)
</code></pre><h4 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h4><pre><code># 因子，以颜色区分    
# Color the points by region: 
ggplot(WHO, aes(x = GNI, y = FertilityRate, color = Region)) + geom_point()

# 数值，以颜色深浅区分
# Color the points according to life expectancy:
ggplot(WHO, aes(x = GNI, y = FertilityRate, color = LifeExpectancy)) + geom_point()
</code></pre><h4 id="拟合"><a href="#拟合" class="headerlink" title="拟合"></a>拟合</h4><pre><code># Is the fertility rate of a country was a good predictor of the percentage of the population under 15?
ggplot(WHO, aes(x = FertilityRate, y = Under15)) + geom_point()

# Let&apos;s try a log transformation:
ggplot(WHO, aes(x = log(FertilityRate), y = Under15)) + geom_point()

# Simple linear regression model to predict the percentage of the population under 15, using the log of the fertility rate:
mod = lm(Under15 ~ log(FertilityRate), data = WHO)
summary(mod)

# Add this regression line to our plot:
ggplot(WHO, aes(x = log(FertilityRate), y = Under15)) + geom_point() +     stat_smooth(method = &quot;lm&quot;)

# 99% confidence interval
ggplot(WHO, aes(x = log(FertilityRate), y = Under15)) + geom_point() + stat_smooth(method = &quot;lm&quot;, level = 0.99)

# No confidence interval in the plot
ggplot(WHO, aes(x = log(FertilityRate), y = Under15)) + geom_point() + stat_smooth(method = &quot;lm&quot;, se = FALSE)

# Change the color of the regression line:
ggplot(WHO, aes(x = log(FertilityRate), y = Under15)) + geom_point() + stat_smooth(method = &quot;lm&quot;, colour = &quot;orange&quot;)
</code></pre><h4 id="热力图"><a href="#热力图" class="headerlink" title="热力图"></a>热力图</h4><p>热力图（数据越多颜色越深）的效果，依靠scale_fill_gradient()来实现，可以通过low和high指定深浅区域的颜色，然后自动形成渐变效果。旁边的图例通过参数guide = “legend”来指定。<br>最终的命令如下，如何生成数据的，就不啰嗦了。</p>
<pre><code># Change the color scheme
ggplot(DayHourCounts, aes(x = Hour, y = Var1)) + geom_tile(aes(fill = Freq)) + scale_fill_gradient(name=&quot;Total MV Thefts&quot;, low=&quot;white&quot;, high=&quot;red&quot;) + theme(axis.title.y = element_blank())
</code></pre><h4 id="地理热力图"><a href="#地理热力图" class="headerlink" title="地理热力图"></a>地理热力图</h4><p>顾名思义，地理热力图就是在地图上显示热力图。<br>包map内置了美国地图、世界地图、法国地图、意大利地图等。地图的原理跟图片类似，图片就是按照某个粒度分成很多个像素点，然后保存像素点的颜色信息；地图就是按照经纬度分成很多点，保存每个点的信息（比如这个点位于哪个州，这样就形成一个美国地图）。<br>对比刚才的 ggplot() + geom_tile() + scale_fill_gradient()<br>我们现在使用 ggmap() + geom_point() + scale_fill_gradient()</p>
<pre><code># Install and load two new packages:
install.packages(&quot;maps&quot;)
install.packages(&quot;ggmap&quot;)
library(maps)
library(ggmap)

# Load a map of Chicago into R:
chicago = get_map(location = &quot;chicago&quot;, zoom = 11)

# Look at the map
ggmap(chicago)

# Plot the first 100 motor vehicle thefts:
ggmap(chicago) + geom_point(data = mvt[1:100,], aes(x = Longitude, y = Latitude))

# Round our latitude and longitude to 2 digits of accuracy, and create a crime counts data frame for each area:
LatLonCounts = as.data.frame(table(round(mvt$Longitude,2), round(mvt$Latitude,2)))

str(LatLonCounts)

# Convert our Longitude and Latitude variable to numbers:
LatLonCounts$Long = as.numeric(as.character(LatLonCounts$Var1))
LatLonCounts$Lat = as.numeric(as.character(LatLonCounts$Var2))

# Plot these points on our map:
ggmap(chicago) + geom_point(data = LatLonCounts, aes(x = Long, y = Lat, color = Freq, size=Freq))

# Change the color scheme:
ggmap(chicago) + geom_point(data = LatLonCounts, aes(x = Long, y = Lat, color = Freq, size=Freq)) + scale_colour_gradient(low=&quot;yellow&quot;, high=&quot;red&quot;)

# We can also use the geom_tile geometry
ggmap(chicago) + geom_tile(data = LatLonCounts, aes(x = Long, y = Lat, alpha = Freq), fill=&quot;red&quot;)
</code></pre><h4 id="云图"><a href="#云图" class="headerlink" title="云图"></a>云图</h4><pre><code># 先准备下数据，我们需要很多单词。
# 跟文本处理类似，依旧使用tweets推文，只是我们这次不抽取词干。
library(tm)
tweets = read.csv(&quot;tweets.csv&quot;, stringsAsFactors=FALSE)
corpus = Corpus(VectorSource(tweets$Tweet))
corpus = tm_map(corpus, tolower)
corpus = tm_map(corpus, PlainTextDocument)
corpus = tm_map(corpus, removePunctuation)
corpus = tm_map(corpus, removeWords, stopwords(&quot;english&quot;))
frequencies = DocumentTermMatrix(corpus)
allTweets = as.data.frame(as.matrix(frequencies))

# 我们需要的单词就是列名
colnames(allTweets)
# 我们需要的另一个指标是单词的频率
colSums(allTweets)

# 现在加载wordcloud这个包
library(wordcloud)
wordcloud(colnames(allTweets), colSums(allTweets), scale=c(2, .25))

# 参数 scale 指定了文字的大小
# scale=c(2, .25) 表示出现频率最高的单词，显示的字号为2，出现频率最小的单词，显示的字号为0.25
wordcloud(colnames(allTweets), colSums(allTweets))
# 等效于
wordcloud(colnames(allTweets), colSums(allTweets), scale=c(4, 0.5))

# min.freq
# 只显示出现频率大于指定值的单词

# max.words
# 最多只显示指定数目的单词

# random.order == FALSE
# 最先显示出现频率最高的单词

# rot.per = 0.5
# 有一半的单词垂直显示。默认值是0.1。

# random.color == TRUE
# 使用随机颜色
</code></pre><p>颜色<br>包RColorBrewer支持下面这些调色板，可以输入 display.brewer.all() 看到下面这张图。<br><img src="http://7xrjai.com1.z0.glb.clouddn.com/20160606-brewer.all.png" alt="brewer.all"></p>
<pre><code>ibrary(RColorBrewer)
display.brewer.all()

# 像这样使用
colors=brewer.pal(9, &quot;Blues&quot;)[5:9]
wordcloud(colnames(allTweets), colSums(allTweets), colors)
</code></pre><h4 id="保存"><a href="#保存" class="headerlink" title="保存"></a>保存</h4><pre><code># Save our plot:
fertilityGNIplot = scatterplot + geom_point(colour = &quot;blue&quot;, size = 3, shape = 17) + ggtitle(&quot;Fertility Rate vs. Gross National Income&quot;)
pdf(&quot;MyPlot.pdf&quot;)
print(fertilityGNIplot)
dev.off()
</code></pre><h3 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h3><h6 id="R中星期的显示"><a href="#R中星期的显示" class="headerlink" title="R中星期的显示"></a>R中星期的显示</h6><p>在中文系统上，weekdays()返回的结果是 “星期二 星期六 星期日 星期三 星期四 星期五 星期一”，如果希望输出的结果是“Friday    Monday  Saturday    Sunday  Thursday   Tuesday Wednesday”，应该怎么做？   </p>
<pre><code># Convert the Date variable to a format that R will recognize:
mvt$Date = strptime(mvt$Date, format=&quot;%m/%d/%y %H:%M&quot;)
mvt$Weekday = weekdays(mvt$Date)

table(mvt$Weekday)
星期二 星期六 星期日 星期三 星期四 星期五 星期一 
26791  27118  26316  27416  27319  29284  27397 

Sys.getlocale()
&quot;zh_CN.UTF-8/zh_CN.UTF-8/zh_CN.UTF-8/C/zh_CN.UTF-8/zh_CN.UTF-8&quot;
Sys.setlocale(&quot;LC_TIME&quot;, &quot;en_US.UTF-8&quot;)
&quot;en_US&quot;
Sys.getlocale()
&quot;zh_CN.UTF-8/zh_CN.UTF-8/zh_CN.UTF-8/C/en_US.UTF-8/zh_CN.UTF-8&quot;

table(mvt$Weekday)
Friday    Monday  Saturday    Sunday  Thursday   Tuesday Wednesday 
29284     27397     27118     26316     27319     26791     27416
</code></pre><p>另外注意到，不管是中文还是英文，都是按照字母表顺序排列的，不是按照实际中有意义的顺序排列的。</p>
<pre><code>WeekdayCounts = as.data.frame(table(mvt$Weekday))
WeekdayCounts$Var1 = factor(WeekdayCounts$Var1, ordered=TRUE, levels=c(&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;,&quot;Saturday&quot;))
</code></pre><h6 id="factor转数字"><a href="#factor转数字" class="headerlink" title="factor转数字"></a>factor转数字</h6><p>先把factor转成character，再转成数字</p>
<pre><code># Convert the second variable, Var2, to numbers and call it Hour:
DayHourCounts$Hour = as.numeric(as.character(DayHourCounts$Var2))
</code></pre><hr>
<p>参考：<br><a href="http://www.cookbook-r.com/Graphs/Shapes_and_line_types/" target="_blank" rel="external">形状和线段的类型</a><br><a href="http://www.cookbook-r.com/Graphs/Colors_\(ggplot2\" target="_blank" rel="external">颜色</a>)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-05-24-R07/" data-id="cjr4zj3d30038izw8hoy12jro" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-05-18-R06" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-05-18-R06/" class="article-date">
  <time datetime="2016-05-18T00:40:09.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据分析笔记/">数据分析笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-05-18-R06/">MIT:The Analytics Edge 笔记06－集群</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MIT课程 <a href="https://courses.edx.org/courses/course-v1:MITx+15.071x_3+1T2016/info" target="_blank" rel="external">15.071x The Analytics Edge</a> 第六单元的学习记录。</p>
<hr>
<h2 id="Clustering"><a href="#Clustering" class="headerlink" title="Clustering"></a>Clustering</h2><p>第六单元的主题是集群。它用来找到数据内的相似性。</p>
<h3 id="1-理论"><a href="#1-理论" class="headerlink" title="1.理论"></a>1.理论</h3><h4 id="Recommendation-Systems"><a href="#Recommendation-Systems" class="headerlink" title="Recommendation Systems"></a>Recommendation Systems</h4><p>Collaborative filtering:<br>过滤出用户间的共同特征／相似性。只使用了用户信息，跟电影内容本身无关。  </p>
<p>Content filtering:<br>利用电影本身的信息，过滤出有共同导演／演员／类别的电影。跟其他用户无关。</p>
<h4 id="clustering"><a href="#clustering" class="headerlink" title="clustering"></a>clustering</h4><p>clustering 集群是一种非监督学习，”unsupervised learning”，将有共同特征的数据分在同一组。   </p>
<h6 id="Hierarchical-clustering"><a href="#Hierarchical-clustering" class="headerlink" title="Hierarchical clustering"></a>Hierarchical clustering</h6><p>Hierarchical clustering的步骤：   </p>
<ol>
<li>计算距离</li>
<li>生成集群</li>
<li>生成cutree</li>
</ol>
<p>注意1:计算距离时，有可能造成内存溢出。计算每两点间的距离，得到的结果是n*(n-1)/2个，我们需要保存这个结果，如果n很大，保存结果的矩阵也很大，可能会导致内存溢出。<br>注意2:计算距离的三种方法：<br>Euclidean distance：点与点之间的欧几里得距离<br>Manhattan Distance：绝对值之和<br>Maximum Coordinate：偏离最严重的点   </p>
<h6 id="K-means-clustering"><a href="#K-means-clustering" class="headerlink" title="K-means clustering"></a>K-means clustering</h6><p>K-means clustering的步骤：</p>
<ol>
<li>指定集群数目k</li>
<li>随机分配所有的点</li>
<li>计算每个集群的中心点</li>
<li>计算每个点到这些中心点的距离，选择最近的，重新分配点到离他最近的集群</li>
<li>重新计算每个集群的中心点</li>
<li>重复4和5多次，直到没有提升</li>
</ol>
<p>注意：centroid distance 集群中所有点的平均值间的距离。</p>
<h4 id="normalize"><a href="#normalize" class="headerlink" title="normalize"></a>normalize</h4><p>如果不同列的数值不是同样的数量级，那么运算后较小的值可能会被忽略，所以需要调整到同样的数量级。</p>
<pre><code>library(caret)
preproc = preProcess(airlines)
airlinesNorm = predict(preproc, airlines)
</code></pre><p>效果就是，所有列的平均值都是0。</p>
<h3 id="2-建模和评估"><a href="#2-建模和评估" class="headerlink" title="2.建模和评估"></a>2.建模和评估</h3><h4 id="Hierarchical-clustering-1"><a href="#Hierarchical-clustering-1" class="headerlink" title="Hierarchical clustering"></a>Hierarchical clustering</h4><pre><code># After following the steps in the video, load the data into R
movies = read.table(&quot;movieLens.txt&quot;, header=FALSE, sep=&quot;|&quot;,quote=&quot;\&quot;&quot;)
# Add column names
colnames(movies) = c(&quot;ID&quot;, &quot;Title&quot;, &quot;ReleaseDate&quot;, &quot;VideoReleaseDate&quot;, &quot;IMDB&quot;, &quot;Unknown&quot;, &quot;Action&quot;, &quot;Adventure&quot;, &quot;Animation&quot;, &quot;Childrens&quot;, &quot;Comedy&quot;, &quot;Crime&quot;, &quot;Documentary&quot;, &quot;Drama&quot;, &quot;Fantasy&quot;, &quot;FilmNoir&quot;, &quot;Horror&quot;, &quot;Musical&quot;, &quot;Mystery&quot;, &quot;Romance&quot;, &quot;SciFi&quot;, &quot;Thriller&quot;, &quot;War&quot;, &quot;Western&quot;)
# Remove unnecessary variables
movies$ID = NULL
movies$ReleaseDate = NULL
movies$VideoReleaseDate = NULL
movies$IMDB = NULL
# Remove duplicates
movies = unique(movies)

# Compute distances
distances = dist(movies[2:20], method = &quot;euclidean&quot;)

# Hierarchical clustering
# clusterMovies = hclust(distances, method = &quot;ward&quot;) 
clusterMovies = hclust(distances, method = &quot;ward.D&quot;)

# Plot the dendrogram
plot(clusterMovies)

# Assign points to clusters
clusterGroups = cutree(clusterMovies, k = 10)
# Create a new data set with just the movies from cluster 2
cluster2 = subset(movies, clusterGroups==2)
</code></pre><h4 id="K-means-clustering-1"><a href="#K-means-clustering-1" class="headerlink" title="K-means clustering"></a>K-means clustering</h4><pre><code>healthy = read.csv(&quot;healthy.csv&quot;, header=FALSE)
# 注意
# data.frame-&gt;matrix-&gt;vector 变成一个2500的vector
# data.frame-&gt;vector 还是一个50*50的data.frame
healthyMatrix = as.matrix(healthy)
healthyVector = as.vector(healthyMatrix)

# Specify number of clusters
k = 5
# Run k-means
set.seed(1)
KMC = kmeans(healthyVector, centers = k, iter.max = 1000)

# Extract clusters
healthyClusters = KMC$cluster

# Plot the image with the clusters
dim(healthyClusters) = c(nrow(healthyMatrix), ncol(healthyMatrix))

image(healthyClusters, axes = FALSE, col=rainbow(k))

# Apply to a test image
tumor = read.csv(&quot;tumor.csv&quot;, header=FALSE)
tumorMatrix = as.matrix(tumor)
tumorVector = as.vector(tumorMatrix)

# Apply clusters from before to new image, using the flexclust package
# kcca K-Centroids Cluster Analysis
install.packages(&quot;flexclust&quot;)
library(flexclust)
KMC.kcca = as.kcca(KMC, healthyVector)
tumorClusters = predict(KMC.kcca, newdata = tumorVector)

# Visualize the clusters
dim(tumorClusters) = c(nrow(tumorMatrix), ncol(tumorMatrix))
image(tumorClusters, axes = FALSE, col=rainbow(k))
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-05-18-R06/" data-id="cjr4zj3d10035izw8vh2omqi3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-05-10-R05" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-05-10-R05/" class="article-date">
  <time datetime="2016-05-14T07:19:28.000Z" itemprop="datePublished">2016-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据分析笔记/">数据分析笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-05-10-R05/">MIT:The Analytics Edge 笔记05－文本分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MIT课程 <a href="https://courses.edx.org/courses/course-v1:MITx+15.071x_3+1T2016/info" target="_blank" rel="external">15.071x The Analytics Edge</a> 第五单元的学习记录。</p>
<hr>
<h2 id="Text-Analytics"><a href="#Text-Analytics" class="headerlink" title="Text Analytics"></a>Text Analytics</h2><p>第五单元的主题是文本分析。</p>
<h3 id="1-理论"><a href="#1-理论" class="headerlink" title="1.理论"></a>1.理论</h3><h4 id="Bag-of-Words"><a href="#Bag-of-Words" class="headerlink" title="Bag of Words"></a>Bag of Words</h4><p>一段文本，可以看作是多个单词的集合。<br>统计这些单词的特征，可以归纳文本的倾向。   </p>
<p>首先，我们需要对文本进行下面这几步预处理：   </p>
<ol>
<li>clean up irregularities(统一大小写)</li>
<li>remove punctuations(去掉标点或者特殊符号)</li>
<li>remove stop words(去掉the／who／is／do这些单词)</li>
<li>stemming(获取词干，也就是去除动词变形，比如agrued，agrues，agruing，都变成agru)</li>
</ol>
<p>然后，我们统计文本中剩下这些单词的出现次数，生成一个矩阵，类似这样的格式：</p>
<table>
<thead>
<tr>
<th>text num</th>
<th>word1</th>
<th>word2</th>
<th>word3</th>
<th>…</th>
</tr>
</thead>
<tbody>
<tr>
<td>text1</td>
<td>2</td>
<td>5</td>
<td>0</td>
<td>…</td>
</tr>
<tr>
<td>text2</td>
<td>0</td>
<td>3</td>
<td>4</td>
<td>…</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>在实际中，生成的矩阵是个稀疏矩阵（有很多0），我们只选取出现次数比较多的，忽略那些不常见的单词。<br>比如选取至少出现过20次的单词，其他的忽略。<br>这样的矩阵，每列的列名就是自变量，矩阵的值就用做自变量的取值。   </p>
<p>最后，手动添加一列，作为因变量，这样就可以根据这些单词的出现次数，预测因变量的取值了。<br>所以，这一列因变量的数值如何定义，它的实际意义是什么，其实是比较复杂的。   </p>
<p>在课程的例子中，它定义了”好感度”，并且只有下面五种取值，{-2,-1,0,1,2}，最终要建立模型预测哪些文本暗示发推的人对苹果公司很没有好感（好感度是－2）。最终发现，文本中含有”hate”,”wtf”的情况，推主对苹果公司很没有好感。😄</p>
<h4 id="IBM-Watson"><a href="#IBM-Watson" class="headerlink" title="IBM Watson"></a>IBM Watson</h4><p>Watson的工作步骤是这样的：</p>
<ol>
<li>Find LAT<br> 首先得搞明白问题是什么，也就是要找到问题的LAT(Lexial Answer Type)。<br> 问题”Mozart’s last and perhaps most powerful symphony shares its name with this planet.”的LAT是”this planet”，因为把答案”Jupiter”替换进原来的句子，<br> “Mozart’s last and perhaps most powerful symphony shares its name with Jupiter”<br> 仍然是说得通的。</li>
<li>Generate Hypothesis<br> 在数据库中搜索上百个候选答案，替换掉LAT，生成很多假说。</li>
<li>Score Hypothesis<br> 对每个假说，进行文本搜索，可以将搜索的到的结果数目作为评分。</li>
<li>Rank Hypothesis<br> 对评分进行排序，选取评分最高的那个作为答案。</li>
</ol>
<h3 id="2-建模和评估"><a href="#2-建模和评估" class="headerlink" title="2.建模和评估"></a>2.建模和评估</h3><p>预处理</p>
<pre><code># Read in the data
# 不要把文本转化为因子
tweets = read.csv(&quot;tweets.csv&quot;, stringsAsFactors=FALSE)

# Create dependent variable
tweets$Negative = as.factor(tweets$Avg &lt;= -1)

# Install new packages
install.packages(&quot;tm&quot;)
library(tm)
install.packages(&quot;SnowballC&quot;)
library(SnowballC)

# Create corpus
corpus = Corpus(VectorSource(tweets$Tweet))

# Convert to lower-case
corpus = tm_map(corpus, tolower)
corpus = tm_map(corpus, PlainTextDocument)

# Remove punctuation
corpus = tm_map(corpus, removePunctuation)

# Remove stopwords and apple
corpus = tm_map(corpus, removeWords, c(&quot;apple&quot;, stopwords(&quot;english&quot;)))

# Stem document 
corpus = tm_map(corpus, stemDocument)
</code></pre><p>统计，生成单词出现次数的矩阵</p>
<pre><code># Create matrix
frequencies = DocumentTermMatrix(corpus)

# Look at matrix 
inspect(frequencies[1000:1005,505:515])

# Check for sparsity
# 找出出现次数至少有20次的单词
findFreqTerms(frequencies, lowfreq=20)

# 忽略99.5%的稀疏数据，只选取0.5%作为有效数据
# Remove sparse terms 
sparse = removeSparseTerms(frequencies, 0.995)

# Convert to a data frame
tweetsSparse = as.data.frame(as.matrix(sparse))
# Make all variable names R-friendly
colnames(tweetsSparse) = make.names(colnames(tweetsSparse))

# Add dependent variable
tweetsSparse$Negative = tweets$Negative
</code></pre><p>建模和评估</p>
<pre><code># Split the data
library(caTools)
set.seed(123)
split = sample.split(tweetsSparse$Negative, SplitRatio = 0.7)
trainSparse = subset(tweetsSparse, split==TRUE)
testSparse = subset(tweetsSparse, split==FALSE)

# Build a CART model
library(rpart)
library(rpart.plot)
tweetCART = rpart(Negative ~ ., data=trainSparse, method=&quot;class&quot;)
# Evaluate the performance of the model
predictCART = predict(tweetCART, newdata=testSparse, type=&quot;class&quot;)
table(testSparse$Negative, predictCART)


# Random forest model
library(randomForest)
set.seed(123)
tweetRF = randomForest(Negative ~ ., data=trainSparse)
# Make predictions:
predictRF = predict(tweetRF, newdata=testSparse)
table(testSparse$Negative, predictRF)
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-05-10-R05/" data-id="cjr4zj3cu002vizw8f75ndj7r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-05-10-zuozhuan" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-05-10-zuozhuan/" class="article-date">
  <time datetime="2016-05-10T07:20:31.000Z" itemprop="datePublished">2016-05-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书/">读书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-05-10-zuozhuan/">眼前：漫游在《左传》的世界</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>后人看历史的时候，不可避免地站在上帝视角思考问题。<br>读史记，一个人将来能够成就什么，从一开始就预设好了。<br>又或者大部分历史书，一个王朝如何兴起、成长、强盛、衰落，仿佛就是按照剧本来演的。   </p>
<p>而实际上，当时的人，哪知道后来会发生什么，哪知道做了某件事情的结果，甚至不知道大国的另外一个角落，此刻发生了什么。</p>
<p>就好像看比赛直播，心情各种复杂，岂止是晚间新闻报道里三言两语能够概括的。</p>
<hr>
<p>亚马逊链接：<a href="https://www.amazon.cn/gp/product/B01AU85S80/ref=od_aui_detailpages00?ie=UTF8&amp;psc=1" target="_blank" rel="external">眼前：漫游在《左传》的世界</a> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-05-10-zuozhuan/" data-id="cjr4zj3cx0031izw898gv57k5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/历史/">历史</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-05-10-xianluoyang" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-05-10-xianluoyang/" class="article-date">
  <time datetime="2016-05-10T07:16:19.000Z" itemprop="datePublished">2016-05-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/生活/">生活</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-05-10-xianluoyang/">2016五月 西安洛阳行记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="西安印象"><a href="#西安印象" class="headerlink" title="西安印象"></a>西安印象</h4><p>很热闹的城市，超多游人。<br>吃的东西，还是自己找小巷子更好。<br>市区或者有名的文保单位明显不及山西的高质量。去了大雁塔50门票+30登塔，顿时发现佛光寺就算收150页不算贵。（啊啊啊，可怜我硬盘数据丢失，两三年的照片都没了）<br>最后发张图证明来过西安：<br><img src="http://7xrjai.com1.z0.glb.clouddn.com/20160522-dyt.JPG" alt="大雁塔">   </p>
<h4 id="洛阳印象"><a href="#洛阳印象" class="headerlink" title="洛阳印象"></a>洛阳印象</h4><p>超棒的小城市，特别喜欢当地人生活的小巷子，特别有人气！（当然让我自己去住我是不愿意的）<br>可为什么大街上都是医院和卖成人用品的店呢？<br>白马寺和龙门石窟都超赞！<br><img src="http://7xrjai.com1.z0.glb.clouddn.com/20160522-bms.JPG" alt="白马寺"><br><img src="http://7xrjai.com1.z0.glb.clouddn.com/20160522-lmsk.JPG" alt="龙门石窟">   </p>
<h4 id="郑州印象"><a href="#郑州印象" class="headerlink" title="郑州印象"></a>郑州印象</h4><p>脏乱差。要不是这次河南博物院大修，我是不愿意来第二次的。   </p>
<h4 id="多余的话"><a href="#多余的话" class="headerlink" title="多余的话"></a>多余的话</h4><p>那些被技术淘汰的事物：旅游地图／景区照相<br>以前到达一个地方，总会立马买一张当地的地图。是的，对我来说，这就是外部世界的入口。而如今大家早已经用手机地图了，在火车站／汽车站，还是能够遇到不少这样的老奶奶，举着地图，“5元一份”，看到这样的情景总是很纳闷，难道没有子女提醒他们，现在大部分人已经不买这个了吗？<br>同样还有景区快照。在以前数码相机还没有普及的时候，无可厚非。但是现在还大规模的打出“5分钟快照”的旗号，你们的世界就不更新吗？除非占据了特别好的机位（只有这个点才能拍到全景，而且我占了，旅游者自己拍不到），或者抓住了时机（比如坐过山车时）。   </p>
<p>停车场<br>秦始皇兵马俑附近农家跑到马路上招揽停车的游人，口号是“只要5块，景区10块”。你们其实没有想到，他们不在乎这五块十块钱，他们在乎的是能不能少走两步路，不谢。   </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-05-10-xianluoyang/" data-id="cjr4zj3cw002zizw8hnmnyhfv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/旅行/">旅行</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/洛阳/">洛阳</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/西安/">西安</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-05-10-R04" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-05-10-R04/" class="article-date">
  <time datetime="2016-05-10T03:44:08.000Z" itemprop="datePublished">2016-05-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据分析笔记/">数据分析笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-05-10-R04/">MIT:The Analytics Edge 笔记04－决策树和随机森林</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MIT课程 <a href="https://courses.edx.org/courses/course-v1:MITx+15.071x_3+1T2016/info" target="_blank" rel="external">15.071x The Analytics Edge</a> 第四单元的学习记录。</p>
<hr>
<h2 id="Trees"><a href="#Trees" class="headerlink" title="Trees"></a>Trees</h2><p>第四单元的主题是决策树和随机森林。</p>
<h3 id="1-理论"><a href="#1-理论" class="headerlink" title="1.理论"></a>1.理论</h3><h4 id="CART-classification-and-regression-trees"><a href="#CART-classification-and-regression-trees" class="headerlink" title="CART(classification and regression trees)"></a>CART(classification and regression trees)</h4><h6 id="决策树"><a href="#决策树" class="headerlink" title="决策树"></a>决策树</h6><p>自变量是决策树上的节点(splits)。但是注意，不是每个自变量都有一个节点；也就是说，有的自变量有多个节点(随着取值的不同，导致因变量的结果也不同)，有的自变量没有节点(对因变量影响很小)。<br>因变量是决策树上的叶子/终端(leaves/nodes)。此图上的因变量的取值是0或者1。<br>在各个节点，根据各个自变量的取值，最终到达叶子节点，也就得到了因变量的取值。<br>注意，决策树的左边，节点的判断语句总是为True／Yes，右边节点的判断语句总是为False／No。<br><img src="http://7xrjai.com1.z0.glb.clouddn.com/20160517-tree-Rplot.png" alt="tree"><br>最左的分支表示，如果 LowerCou=lbr 且 Responde=CRI 且 Petition=CIT，那么因变量的取值为0。<br>最右的分支表示，如果 LowerCou!=lbr 且 Responde=STA，那么因变量的取值为1。   </p>
<h6 id="决策树的大小"><a href="#决策树的大小" class="headerlink" title="决策树的大小"></a>决策树的大小</h6><p>minbucket可以理解为，决策树被节点分割后，每个bucket数据的数量。<br>minbucket越大，分组越少，split越少。<br>minbucket越小，分组越多，split越多。   </p>
<h6 id="Classification-tree-和-Regression-tree"><a href="#Classification-tree-和-Regression-tree" class="headerlink" title="Classification tree 和 Regression tree"></a>Classification tree 和 Regression tree</h6><ul>
<li>Classification tree analysis is when the predicted outcome is the class to which the data belongs.（简单的讲，预测值是0和1，比如支持还是反对）</li>
<li>Regression tree analysis is when the predicted outcome can be considered a real number.（简单的讲，预测值是可变的，比如房价等等）</li>
</ul>
<p>体现在代码中的话，<br>如果指定了type = “class”，那么是 Classification tree。<br>如果没有指定type = “class”，那么是 Regression tree。   </p>
<h4 id="Random-Forest"><a href="#Random-Forest" class="headerlink" title="Random Forest"></a>Random Forest</h4><p>随机森林，被设计出来用于提高CART的精度。<br>和字面意思类似，如果决策树只有一棵树，那么随机森林会创建多个决策树，然后找到效果最好的那一个。<br>那么它是如何创建多个决策树的呢，有点复杂。<br>它并不是多次调用rpart()，简单的调整几个参数而已。<br>每个决策树所用的数据，都只是原数据的随机subset或者说随机子集。<br>如果训练集被分成1，2，3，4，5 这五个子集，那么第一次可能选取2，4，5，2，1，第二次可能选取3，5，1，5，2。</p>
<p>参数nodesize</p>
<pre><code>类似于minbucket，每个子集的最小数目。它越小，生成的决策树越大。
</code></pre><p>参数ntree</p>
<pre><code>生成多少个决策树。一般几百个就够了。
</code></pre><p>好消息是，参数的选取，相比CART而言，对结果的影响没有那么大。</p>
<h4 id="Cross-Validation"><a href="#Cross-Validation" class="headerlink" title="Cross Validation"></a>Cross Validation</h4><p>minbucket应该选取什么样的值，来大道最好效果呢？<br>我们采用 k-fold cross validation 的方法。</p>
<p>我们将训练集train分成k份，比如 k=5 的时候，<br>我们先用1，2，3，4来训练，5用来验证；<br>再用1，2，3，5来训练，4用来验证；<br>再用1，2，4，5来训练，3用来验证。。。<br>所以模型中创建了很多决策树。<br>我们测试每个分割方法下，参数每一个可能的取值，计算这个取值对应的预测精度，绘制曲线。<br>曲线的X轴是参数的取值，Y轴是预测精度，这样可以很容易找到参数的最佳取值。</p>
<h6 id="CP"><a href="#CP" class="headerlink" title="CP"></a>CP</h6><p>像R平方一样，我们也定义了一个概念 cp(complexity parameter) 用来观测效果。<br>cp越小，决策树越大(over fitting)。     </p>
<p><img src="http://latex.codecogs.com/svg.latex?s = splits" alt="formula"><br><img src="http://latex.codecogs.com/svg.latex?\lambda = penalty\\;error" alt="formula"><br><img src="http://latex.codecogs.com/svg.latex?\\sum_{leaves}\(RSS\\;at\\;each\\;leaf\" alt="formula"> + \lambda*s )<br><img src="http://latex.codecogs.com/svg.latex?cp = \\frac{\lambda}{RSS\(no\\;splits\" alt="formula">})<br>cp越大，分母越小，tree越小。<br>cp越小，分母越大，tree越大。</p>
<h3 id="2-建模和评估"><a href="#2-建模和评估" class="headerlink" title="2.建模和评估"></a>2.建模和评估</h3><h4 id="CART"><a href="#CART" class="headerlink" title="CART"></a>CART</h4><pre><code># Install rpart library
install.packages(&quot;rpart&quot;)
library(rpart)
install.packages(&quot;rpart.plot&quot;)
library(rpart.plot)

# CART model
# method=&quot;class&quot; 表示我们创建了一个 classification tree
StevensTree = rpart(Reverse ~ Circuit + Issue + Petitioner + Respondent + LowerCourt + Unconst, data = Train, method=&quot;class&quot;, minbucket=25)

# plot tree
prp(StevensTree)

# Make predictions
# 记得指定 type = &quot;class&quot;
PredictCART = predict(StevensTree, newdata = Test, type = &quot;class&quot;)
table(Test$Reverse, PredictCART)

# ROC curve
library(ROCR)

PredictROC = predict(StevensTree, newdata = Test)
# 注意这里没有指定 type = &quot;class&quot;
# 也就是说，学习得到 classification tree 的模型，但是评估使用 regression tree
# 真是天杀的。。。
# 这个PredictROC 有两列
# 第一列是预测y=0的概率
# 第二列是预测y=1的概率
# 如果比较一下 PredictROC 每行的数据，可以发现这两个概率和为1！那是当然！
# 如果拿 PredictROC 和 PredictCART相比
# 如果 PredictROC[n,2]&gt;0.5，那么PredictCART[n]=1。
# 如果 PredictROC[n,2]&lt;0.5，那么PredictCART[n]=0。
# 所以下面我们只使用第二列

pred = prediction(PredictROC[,2], Test$Reverse)
perf = performance(pred, &quot;tpr&quot;, &quot;fpr&quot;)
plot(perf)

# AUC
as.numeric(performance(pred, &quot;auc&quot;)@y.values)
</code></pre><h4 id="Random-Forest-1"><a href="#Random-Forest-1" class="headerlink" title="Random Forest"></a>Random Forest</h4><pre><code>install.packages(&quot;randomForest&quot;)
library(randomForest)

# Build random forest model
StevensForest = randomForest(Reverse ~ Circuit + Issue + Petitioner + Respondent + LowerCourt + Unconst, data = Train, ntree=200, nodesize=25 )
# Warning message:
# In randomForest.default(m, y, ...) :
#   The response has five or fewer unique values.  Are you sure you want to do regression?

# 如上面的提示消息所示
# randomForest认为因变量的取值很少，不应该用regression
# 但是 random forest 没有 type = &quot;class&quot; 这样的参数
# 所以我们必须确保因变量这一列的取值都是因子
# Convert outcome to factor
Train$Reverse = as.factor(Train$Reverse)
Test$Reverse = as.factor(Test$Reverse)

# Try again
StevensForest = randomForest(Reverse ~ Circuit + Issue + Petitioner + Respondent + LowerCourt + Unconst, data = Train, ntree=200, nodesize=25 )

# Make predictions
PredictForest = predict(StevensForest, newdata = Test)
table(Test$Reverse, PredictForest)
</code></pre><h4 id="Cross-Validation-1"><a href="#Cross-Validation-1" class="headerlink" title="Cross Validation"></a>Cross Validation</h4><pre><code># Install cross-validation packages
install.packages(&quot;caret&quot;)
library(caret)
install.packages(&quot;e1071&quot;)
library(e1071)

# Define cross-validation experiment
numFolds = trainControl( method = &quot;cv&quot;, number = 10 )
cpGrid = expand.grid( .cp = seq(0.01,0.5,0.01)) 

# Perform the cross validation
train(Reverse ~ Circuit + Issue + Petitioner + Respondent + LowerCourt + Unconst, data = Train, method = &quot;rpart&quot;, trControl = numFolds, tuneGrid = cpGrid )

# Create a new CART model
StevensTreeCV = rpart(Reverse ~ Circuit + Issue + Petitioner + Respondent + LowerCourt + Unconst, data = Train, method=&quot;class&quot;, cp = 0.18)

# Make predictions
PredictCV = predict(StevensTreeCV, newdata = Test, type = &quot;class&quot;)
table(Test$Reverse, PredictCV)
</code></pre><h4 id="参数cp和loss的使用"><a href="#参数cp和loss的使用" class="headerlink" title="参数cp和loss的使用"></a>参数cp和loss的使用</h4><pre><code># Penalty Matrix
PenaltyMatrix = matrix(c(0,1,2,3,4,2,0,1,2,3,4,2,0,1,2,6,4,2,0,1,8,6,4,2,0), byrow=TRUE, nrow=5)

# CART model
ClaimsTree = rpart(bucket2009 ~ age + alzheimers + arthritis + cancer + copd + depression + diabetes + heart.failure + ihd + kidney + osteoporosis + stroke + bucket2008 + reimbursement2008, data=ClaimsTrain, method=&quot;class&quot;, cp=0.00005)

prp(ClaimsTree)

# Make predictions
PredictTest = predict(ClaimsTree, newdata = ClaimsTest, type = &quot;class&quot;)
# New CART model with loss matrix
ClaimsTree = rpart(bucket2009 ~ age + alzheimers + arthritis + cancer + copd + depression + diabetes + heart.failure + ihd + kidney + osteoporosis + stroke + bucket2008 + reimbursement2008, data=ClaimsTrain, method=&quot;class&quot;, cp=0.00005, parms=list(loss=PenaltyMatrix))

# Redo predictions and penalty error
PredictTest = predict(ClaimsTree, newdata = ClaimsTest, type = &quot;class&quot;)
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-05-10-R04/" data-id="cjr4zj3ct002tizw8e4j3frhx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-04-26-R03" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-04-26-R03/" class="article-date">
  <time datetime="2016-04-25T19:52:13.000Z" itemprop="datePublished">2016-04-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据分析笔记/">数据分析笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-04-26-R03/">MIT:The Analytics Edge 笔记03－指数回归</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MIT课程 <a href="https://courses.edx.org/courses/course-v1:MITx+15.071x_3+1T2016/info" target="_blank" rel="external">15.071x The Analytics Edge</a> 第三单元的学习记录。</p>
<hr>
<h2 id="Logistic-Regression"><a href="#Logistic-Regression" class="headerlink" title="Logistic Regression"></a>Logistic Regression</h2><p>第三单元的主题是指数回归。</p>
<h3 id="1-理论"><a href="#1-理论" class="headerlink" title="1.理论"></a>1.理论</h3><h4 id="指数回归"><a href="#指数回归" class="headerlink" title="指数回归"></a>指数回归</h4><p>指数回归用于因变量y是二进制的情况，也就是说，y的取值只有1或者0。<br>y=1的概率：<br><img src="http://latex.codecogs.com/svg.latex?P\(y=1\" alt="formula">=\frac{1}{1+e^{-{(\beta_0 +\beta_1x_1+\beta_2x_2+\ldots+\beta_nx_n+\epsilon)}}})  </p>
<p>y=1的概率与y＝0的概率的比值：<br><img src="http://latex.codecogs.com/svg.latex?Odds=\\frac{P\(y=1\" alt="formula">}{P(y=0)})   </p>
<p><img src="http://latex.codecogs.com/svg.latex?Odds=\\frac{P\(y=1\" alt="formula">}{1-P(y=1)})   </p>
<p><img src="http://latex.codecogs.com/svg.latex?Odds=e^{\\beta_0 +\\beta_1x_1+\\beta_2x_2+\\ldots+\\beta_nx_n+\\epsilon}" alt="formula">   </p>
<h4 id="混淆矩阵（confusion-matrix）"><a href="#混淆矩阵（confusion-matrix）" class="headerlink" title="混淆矩阵（confusion matrix）"></a>混淆矩阵（confusion matrix）</h4><p>有阈值t，<br>如果P(y=1) &gt;=t，则预测y=1。<br>如果P(y=1) &lt; t，则预测y=0。   </p>
<p>对于预测结果，我们得到矩阵   </p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">predict y=0</th>
<th style="text-align:left">predict y=1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">actual y=0</td>
<td style="text-align:left">TN (True  Nagative)</td>
<td style="text-align:left">FP (False Positive)</td>
</tr>
<tr>
<td style="text-align:left">actual y=1</td>
<td style="text-align:left">FN (False Nagative)</td>
<td style="text-align:left">TP (True  Positive)</td>
</tr>
</tbody>
</table>
<p>根据矩阵中的值，我们可以计算指数回归的一些指标：   </p>
<p><img src="http://latex.codecogs.com/svg.latex?accuracy=\\frac{TN+TP}{N}" alt="formula"><br><img src="http://latex.codecogs.com/svg.latex?specificity=\\frac{TN}{TN+FP}" alt="formula"><br><img src="http://latex.codecogs.com/svg.latex?sensitivity=\\frac{TP}{FN+TP}" alt="formula">   </p>
<p>补充概念：<br>适合率<br><img src="http://latex.codecogs.com/svg.latex?precision=\\frac{TP}{FP+TP}" alt="formula"><br>再现率<br><img src="http://latex.codecogs.com/svg.latex?recall=tpr=\\frac{TP}{FN+TP}" alt="formula"><br>F值（F-measure）<br><img src="http://latex.codecogs.com/svg.latex?F-measure=\\frac{2*precision*recall}{precision+recall}" alt="formula"><br>F值越高，性能越好</p>
<h4 id="ROC曲线"><a href="#ROC曲线" class="headerlink" title="ROC曲线"></a>ROC曲线</h4><p>ROC曲线 (Receiver Operator Characteristic curve)可以指导我们如何选取阈值t。<br>y轴的指标是 sensitivity，所以也叫 True positive rate。   </p>
<p><img src="http://latex.codecogs.com/svg.latex?sensitivity=\\frac{TP}{FN+TP}" alt="formula"><br>x轴的指标是 1-specificity，所以也叫 False positive rate。   </p>
<p><img src="http://latex.codecogs.com/svg.latex?1-sensitivity=\\frac{FP}{TN+FP}" alt="formula">    </p>
<p>每取一个阈值t，则计算相对应的 TPR 和 FPR，在坐标里标出这个点，就形成ROC曲线。<br><img src="http://7xrjai.com1.z0.glb.clouddn.com/20160509-ROC.png" alt="ROC Curve">   </p>
<p>如图所示，   </p>
<pre><code>t=0时，我们预测所有的y=1，即TPR=1，FPR=1，对应的坐标是(1,1)   
t=1时，我们预测所有的y=0，即TPR=0，FPR=0，对应的坐标是(0,0)   
</code></pre><p>这就是曲线的两个端点。</p>
<h4 id="AUC值"><a href="#AUC值" class="headerlink" title="AUC值"></a>AUC值</h4><p>AUC（Area Under Curve）被定义为ROC曲线下的面积，显然这个面积的数值不会大于1。又由于ROC曲线一般都处于y=x这条直线的上方，所以AUC的取值范围在0.5和1之间。   </p>
<h3 id="2-建立回归模型"><a href="#2-建立回归模型" class="headerlink" title="2.建立回归模型"></a>2.建立回归模型</h3><pre><code># 建立模型
# Top10作为因变量，其他所有的列都作为自变量
SongsLog1 = glm(Top10 ~ ., data=SongsTrain, family=binomial)

# Top10作为因变量，除了loudness以外的所有列都作为自变量
SongsLog2 = glm(Top10 ~ . - loudness, data=SongsTrain, family=binomial)
</code></pre><h3 id="3-评估"><a href="#3-评估" class="headerlink" title="3.评估"></a>3.评估</h3><pre><code># 预测
testPredict = predict(SongsLog3, newdata=SongsTest, type=&quot;response&quot;)

# 生成混淆矩阵
table(SongsTest$Top10, testPredict &gt;= 0.45)

# 生成ROC曲线
library(ROCR)
pred = prediction(testPredict, test$violator)
perf = performance(pred, &quot;tpr&quot;, &quot;fpr&quot;)
plot(perf)

# 加点颜色和坐标点
plot(perf, colorize=TRUE, print.cutoffs.at=seq(0,1,0.1), text.adj=c(-0.2,1.7))

# 计算AUC值
as.numeric(performance(pred, &quot;auc&quot;)@y.values)
</code></pre><h3 id="附录A-分割train和test的方法一"><a href="#附录A-分割train和test的方法一" class="headerlink" title="附录A 分割train和test的方法一"></a>附录A 分割train和test的方法一</h3><pre><code>library(caTools)
set.seed(144)

split = sample.split(parole$violator, SplitRatio = 0.7)
train = subset(parole, split == TRUE)
test = subset(parole, split == FALSE)
# 特别注意：每次运行出来的结果是不一样的
</code></pre><p>也可以这样做：</p>
<pre><code>library(caTools)
set.seed(144)

split = sample(1:nrow(data), size=0.7 * nrow(data))
train = data[split,]
test = data[-split,]
</code></pre><h3 id="附录B-补充缺失数据"><a href="#附录B-补充缺失数据" class="headerlink" title="附录B 补充缺失数据"></a>附录B 补充缺失数据</h3><pre><code>library(mice)
set.seed(144)
vars.for.imputation = setdiff(names(loans), &quot;not.fully.paid&quot;)
imputed = complete(mice(loans[vars.for.imputation]))
loans[vars.for.imputation] = imputed
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-04-26-R03/" data-id="cjr4zj3cr002qizw8u6wesj12" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2016-04-23-R02" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/2016-04-23-R02/" class="article-date">
  <time datetime="2016-04-22T23:19:39.000Z" itemprop="datePublished">2016-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据分析笔记/">数据分析笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/2016-04-23-R02/">MIT:The Analytics Edge 笔记02－线性回归</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MIT课程 <a href="https://courses.edx.org/courses/course-v1:MITx+15.071x_3+1T2016/info" target="_blank" rel="external">15.071x The Analytics Edge</a> 第二单元的学习记录。</p>
<hr>
<h2 id="Linear-Regression"><a href="#Linear-Regression" class="headerlink" title="Linear Regression"></a>Linear Regression</h2><p>第二单元的主题是线性回归。</p>
<h3 id="1-理论"><a href="#1-理论" class="headerlink" title="1.理论"></a>1.理论</h3><p>一元线性回归公式：   </p>
<p><img src="http://latex.codecogs.com/svg.latex?y^i=\\beta_0+\\beta_1x^i+\\epsilon^i" alt="formula">   </p>
<p>其中x是自变量independent variable，y是因变量dependent variable。<br>beta是相关系数coefficient，epsilon是误差error。   </p>
<p>为了判断线性回归的效果，我们有如下检验标准：   </p>
<p>1.SSE（sum of squared errors）<br>注意这里的误差是实际值相对于预测值的。   </p>
<p><img src="http://latex.codecogs.com/svg.latex?SSE = \\sum_{i=1}^{n}\\epsilon_i^2" alt="formula">   </p>
<p>2.SST （total sum of square）<br>公式同上。但这里的误差是实际值相对于baseline的。baseline是因变量的平均值。<br>所以有 0 &lt;= SSE &lt;= SST 。 </p>
<p>3.RMSE（root mean square error）   </p>
<p><img src="http://latex.codecogs.com/svg.latex?RMSE = \\sqrt\\frac{SSE}{n}" alt="formula">   </p>
<p>4.R平方   </p>
<p><img src="http://latex.codecogs.com/svg.latex?R^2 = 1 - \\frac{SSE}{SST}" alt="formula">   </p>
<p>R平方越接近1越好。   </p>
<p>多元线性回归公式：   </p>
<p><img src="http://latex.codecogs.com/svg.latex?y^i = \\beta_0 + \\beta_1x_1^i + \\beta_2x_2^i + \\ldots + \\beta_nx_n^i + \\epsilon^i" alt="formula">   </p>
<pre><code>所有数据分析，都要经历 training－test－predict 这三个过程。
在接下来的例子中，我们介绍 建模－评估 这前两个过程。
</code></pre><p>补充一个relative error的公式：   </p>
<p><img src="http://latex.codecogs.com/svg.latex?relative\\;error =  \\frac{observed\\;value - estimated\\,value}{observed\\;value}" alt="formula"></p>
<h5 id="2-0-事前整理"><a href="#2-0-事前整理" class="headerlink" title="2.0 事前整理"></a>2.0 事前整理</h5><p>2.0.1 去除空值</p>
<pre><code># 如果数据中包含空值
DF ＝ na.omit(DF)
</code></pre><p>2.0.2 reference level<br>有些列时字符型的，它们无法进行计算。<br>如果某列的因子不算多，我们可以把这一列变换成多个可以用于计算的列。   </p>
<pre><code># 假设DF$colr有因子 &quot;Red&quot;4次, &quot;Blue&quot;3次, &quot;Yellow&quot;2次
DF$colr = relevel(DF$colr, &quot;red&quot;)

# 效果是，DF$colr 这一列不见了
# 增加了两列 DF$colrBlue 和 DF$colrYellow
# 原先 DF$colr == &quot;Red&quot; 的那些行，它们 colrBlue 和 colrYellow 的值都是0
# 原先 DF$colr == &quot;Blue&quot; 的那些行，它们 colrBlue=1, colrYellow=0
# 原先 DF$colr == &quot;Yellow&quot; 的那些行，它们 colrBlue=0, colrYellow=1
</code></pre><h3 id="2-建立回归模型"><a href="#2-建立回归模型" class="headerlink" title="2.建立回归模型"></a>2.建立回归模型</h3><p>建模使用lm()函数。<br>DF是保存学习数据的data.frame。</p>
<pre><code>model = lm(y ~ x1 + x2 + ... +xn, data = DF)
# y不要写成 DF$y
# x1也不要写成 DF$x1
# 否则，后面做预测predict()的时候，DFTest代入会报warning

# 除了y列以外所有列
model = lm(y ~ ., data = DF)

# 误差 model$residuals
SSE = sum(model$residuals^2)
</code></pre><p>随便看个结果吧</p>
<pre><code>&gt; summary(model)

Call:
lm(formula = Price ~ HarvestRain + WinterRain, data = wine)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.0933 -0.3222 -0.1012  0.3871  1.1877 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  7.865e+00  6.616e-01  11.888 4.76e-11 ***
HarvestRain -4.971e-03  1.601e-03  -3.105  0.00516 ** 
WinterRain  -9.848e-05  9.007e-04  -0.109  0.91392    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 0.5611 on 22 degrees of freedom
Multiple R-squared:  0.3177,    Adjusted R-squared:  0.2557 
F-statistic: 5.122 on 2 and 22 DF,  p-value: 0.01492
</code></pre><p>Call表示建模使用的语句。<br>Residuals表示误差。<br>Coefficients表示系数，就是公式里面的beta。<br>Estimate的第一行是常数beta0，第二行是第一个自变量的系数beta1，第三行是第二个自变量的系数beta2，后面类推。<br>t value越大越好</p>
<p><img src="http://latex.codecogs.com/svg.latex?{t\\,value} = \\frac{Estimate}{Std. Error}" alt="formula">   </p>
<p>Pr(&gt;|t|) 和t value相反，越小越好。<br>最后一列星星越多越好。<br>三短横下面这行解释了星星的含义。<br>Multiple R-squared就是R平方，越接近1越准确。</p>
<h3 id="3-评估"><a href="#3-评估" class="headerlink" title="3.评估"></a>3.评估</h3><p>对于刚过简历的模型，我们使用测试数据来评估一下准确度。<br>model就是上文建立的模型。<br>DFTest是测试数据，它的结构和上文的DF一样。   </p>
<pre><code>predict = predict(model, newdata = DFTest)
</code></pre><p>这个命令的返回值是 DFTest$Price 的<strong>预测</strong>结果。你可以跟 DFTest$Price 的<strong>实际</strong>结果相比较，计算SSE、RMSE、R平方等等来衡量对测试数据的预测的准确性。   </p>
<pre><code>SSE = sum( (DFTest$Price - predict)^2 )
SST = sum( (DFTest$Price - mean(DF$Price)^2 )
R2 = 1 - SSE/SST
</code></pre><h3 id="4-Correlation"><a href="#4-Correlation" class="headerlink" title="4.Correlation"></a>4.Correlation</h3><p>线性相关性</p>
<pre><code>cor(var1, var2)
# 也可以考察整个DF中，每两列的线性相关性
cor(DF)
</code></pre><p>返回值是斜率。   </p>
<p><strong>建立线性回归模型的时候，应该去掉相关性比较高的列。</strong></p>
<h3 id="补充知识A－棒球统计术语"><a href="#补充知识A－棒球统计术语" class="headerlink" title="补充知识A－棒球统计术语"></a>补充知识A－棒球统计术语</h3><p>完全不懂棒球啊，一开始摸不着头脑。</p>
<table>
<thead>
<tr>
<th style="text-align:left">缩写</th>
<th style="text-align:left">原文</th>
<th style="text-align:left">中文</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">RS</td>
<td style="text-align:left">Run Scores</td>
<td style="text-align:left">跑分，得分</td>
</tr>
<tr>
<td style="text-align:left">RA</td>
<td style="text-align:left">Run Allowed</td>
<td style="text-align:left">失分，对手得分</td>
</tr>
<tr>
<td style="text-align:left">OBP</td>
<td style="text-align:left">On-Base Percentage</td>
<td style="text-align:left">上垒率</td>
</tr>
<tr>
<td style="text-align:left">OOBP</td>
<td style="text-align:left">Opponent On-Base Percentage</td>
<td style="text-align:left">对手上垒率</td>
</tr>
<tr>
<td style="text-align:left">SLG</td>
<td style="text-align:left">Slugging Percentage</td>
<td style="text-align:left">长打率，击中率</td>
</tr>
<tr>
<td style="text-align:left">OSLG</td>
<td style="text-align:left">Opponent Slugging Percentage</td>
<td style="text-align:left">对手长打率</td>
</tr>
<tr>
<td style="text-align:left">BA</td>
<td style="text-align:left">Batting Avarage</td>
<td style="text-align:left">平均成功率</td>
</tr>
</tbody>
</table>
<h3 id="补充知识B－篮球统计术语"><a href="#补充知识B－篮球统计术语" class="headerlink" title="补充知识B－篮球统计术语"></a>补充知识B－篮球统计术语</h3><p>年轻时看NBA，好歹知道一点。</p>
<table>
<thead>
<tr>
<th style="text-align:left">缩写</th>
<th style="text-align:left">原文</th>
<th style="text-align:left">中文</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">PTS</td>
<td style="text-align:left">Points</td>
<td style="text-align:left">得分</td>
</tr>
<tr>
<td style="text-align:left">oppPTS</td>
<td style="text-align:left">Opponent Points</td>
<td style="text-align:left">失分，对手得分</td>
</tr>
<tr>
<td style="text-align:left">FG</td>
<td style="text-align:left">Field Goals (success)</td>
<td style="text-align:left">进球数</td>
</tr>
<tr>
<td style="text-align:left">FGA</td>
<td style="text-align:left">Field Goals Attempted</td>
<td style="text-align:left">出手次数</td>
</tr>
<tr>
<td style="text-align:left">X2P</td>
<td style="text-align:left">2 Points</td>
<td style="text-align:left">2分球进球数</td>
</tr>
<tr>
<td style="text-align:left">X2PA</td>
<td style="text-align:left">2 Points Attempted</td>
<td style="text-align:left">2分球出手次数</td>
</tr>
<tr>
<td style="text-align:left">X3P</td>
<td style="text-align:left">3 Points</td>
<td style="text-align:left">3分球进球数</td>
</tr>
<tr>
<td style="text-align:left">X3PA</td>
<td style="text-align:left">3 Points Attempted</td>
<td style="text-align:left">3分球出手次数</td>
</tr>
<tr>
<td style="text-align:left">FT</td>
<td style="text-align:left">Free Throw</td>
<td style="text-align:left">罚球进球数</td>
</tr>
<tr>
<td style="text-align:left">FTA</td>
<td style="text-align:left">Free Throw Attempted</td>
<td style="text-align:left">发球出手次数</td>
</tr>
<tr>
<td style="text-align:left">ORB</td>
<td style="text-align:left">Offensive Rebounds</td>
<td style="text-align:left">前场篮板，进攻篮板</td>
</tr>
<tr>
<td style="text-align:left">DRB</td>
<td style="text-align:left">Defensive Rebounds</td>
<td style="text-align:left">后场篮板，防守篮板</td>
</tr>
<tr>
<td style="text-align:left">AST</td>
<td style="text-align:left">Assists</td>
<td style="text-align:left">助攻</td>
</tr>
<tr>
<td style="text-align:left">STL</td>
<td style="text-align:left">Steals</td>
<td style="text-align:left">抢断</td>
</tr>
<tr>
<td style="text-align:left">BLK</td>
<td style="text-align:left">Blocks</td>
<td style="text-align:left">盖帽</td>
</tr>
<tr>
<td style="text-align:left">TOV</td>
<td style="text-align:left">Turnovers</td>
<td style="text-align:left">失误</td>
</tr>
</tbody>
</table>
<p>注：X2P列，原始数据列名是2P。由于R不支持数字开头的列名／变量，读取CSV文件的时候，会在原列名2P前加个X，从而变成 X2P。</p>
<h3 id="补充知识C－滞后序列"><a href="#补充知识C－滞后序列" class="headerlink" title="补充知识C－滞后序列"></a>补充知识C－滞后序列</h3><p>函数lag，用于生成滞后/偏移序列？   </p>
<pre><code>lag(x, k = 1, ...)
# k &lt; 0, previous observations   
# k &gt; 0, future observations
# na.pad=TRUE, add missing values
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://youngspring1.github.io/2016/2016-04-23-R02/" data-id="cjr4zj3cp002nizw8tv55wnar" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/6/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分類</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/data-table教程/">data.table教程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据分析笔记/">数据分析笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/新知/">新知</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习的数学基础/">机器学习的数学基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/">读书</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kevin-Kelly/">Kevin Kelly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LCS/">LCS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSS-Lisence/">OSS Lisence</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R/">R</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/The-Inevitable/">The Inevitable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/career/">career</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/class/">class</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data-table/">data.table</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/evalution/">evalution</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github-pages-blog/">github pages blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hugo/">hugo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/joel-on-software/">joel on software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mode/">mode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shiny-server/">shiny server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/software/">software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typeof/">typeof</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/west-world/">west world</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xlrd/">xlrd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/专注/">专注</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/人类简史/">人类简史</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/入门教程/">入门教程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单车/">单车</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/历史/">历史</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/塞尔达传说/">塞尔达传说</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/孔庙孔府孔林/">孔庙孔府孔林</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小说/">小说</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/归一化/">归一化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/想法/">想法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感受/">感受</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/敦煌/">敦煌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据分析/">数据分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/旅行/">旅行</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日本/">日本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日记/">日记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/有顶天家族/">有顶天家族</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器学习/">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/概率/">概率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/泰山/">泰山</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/洛阳/">洛阳</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深度学习/">深度学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/游戏/">游戏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/猫/">猫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活感受/">生活感受</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/碎碎念/">碎碎念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/穿越/">穿越</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/简单工作/">简单工作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/美食/">美食</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/背景知识/">背景知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/西安/">西安</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/诗/">诗</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语音识别/">语音识别</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书/">读书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/赛车/">赛车</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/转载/">转载</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Kevin-Kelly/" style="font-size: 10px;">Kevin Kelly</a> <a href="/tags/LCS/" style="font-size: 10px;">LCS</a> <a href="/tags/OSS-Lisence/" style="font-size: 10px;">OSS Lisence</a> <a href="/tags/R/" style="font-size: 20px;">R</a> <a href="/tags/The-Inevitable/" style="font-size: 10px;">The Inevitable</a> <a href="/tags/career/" style="font-size: 10px;">career</a> <a href="/tags/class/" style="font-size: 10px;">class</a> <a href="/tags/data-table/" style="font-size: 17.5px;">data.table</a> <a href="/tags/design/" style="font-size: 10px;">design</a> <a href="/tags/evalution/" style="font-size: 10px;">evalution</a> <a href="/tags/github-pages-blog/" style="font-size: 10px;">github pages blog</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/hugo/" style="font-size: 10px;">hugo</a> <a href="/tags/joel-on-software/" style="font-size: 10px;">joel on software</a> <a href="/tags/life/" style="font-size: 10px;">life</a> <a href="/tags/mode/" style="font-size: 10px;">mode</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/shiny-server/" style="font-size: 12.5px;">shiny server</a> <a href="/tags/software/" style="font-size: 12.5px;">software</a> <a href="/tags/typeof/" style="font-size: 10px;">typeof</a> <a href="/tags/west-world/" style="font-size: 10px;">west world</a> <a href="/tags/xlrd/" style="font-size: 10px;">xlrd</a> <a href="/tags/专注/" style="font-size: 10px;">专注</a> <a href="/tags/人类简史/" style="font-size: 10px;">人类简史</a> <a href="/tags/入门教程/" style="font-size: 10px;">入门教程</a> <a href="/tags/单车/" style="font-size: 10px;">单车</a> <a href="/tags/历史/" style="font-size: 10px;">历史</a> <a href="/tags/塞尔达传说/" style="font-size: 10px;">塞尔达传说</a> <a href="/tags/孔庙孔府孔林/" style="font-size: 10px;">孔庙孔府孔林</a> <a href="/tags/小说/" style="font-size: 10px;">小说</a> <a href="/tags/归一化/" style="font-size: 10px;">归一化</a> <a href="/tags/想法/" style="font-size: 12.5px;">想法</a> <a href="/tags/感受/" style="font-size: 10px;">感受</a> <a href="/tags/敦煌/" style="font-size: 10px;">敦煌</a> <a href="/tags/数据分析/" style="font-size: 10px;">数据分析</a> <a href="/tags/旅行/" style="font-size: 17.5px;">旅行</a> <a href="/tags/日本/" style="font-size: 15px;">日本</a> <a href="/tags/日记/" style="font-size: 10px;">日记</a> <a href="/tags/有顶天家族/" style="font-size: 10px;">有顶天家族</a> <a href="/tags/机器学习/" style="font-size: 10px;">机器学习</a> <a href="/tags/概率/" style="font-size: 12.5px;">概率</a> <a href="/tags/泰山/" style="font-size: 10px;">泰山</a> <a href="/tags/洛阳/" style="font-size: 10px;">洛阳</a> <a href="/tags/深度学习/" style="font-size: 10px;">深度学习</a> <a href="/tags/游戏/" style="font-size: 12.5px;">游戏</a> <a href="/tags/猫/" style="font-size: 10px;">猫</a> <a href="/tags/生活感受/" style="font-size: 10px;">生活感受</a> <a href="/tags/电影/" style="font-size: 12.5px;">电影</a> <a href="/tags/碎碎念/" style="font-size: 12.5px;">碎碎念</a> <a href="/tags/穿越/" style="font-size: 10px;">穿越</a> <a href="/tags/简单工作/" style="font-size: 10px;">简单工作</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/美食/" style="font-size: 10px;">美食</a> <a href="/tags/背景知识/" style="font-size: 10px;">背景知识</a> <a href="/tags/西安/" style="font-size: 10px;">西安</a> <a href="/tags/诗/" style="font-size: 10px;">诗</a> <a href="/tags/语音识别/" style="font-size: 10px;">语音识别</a> <a href="/tags/读书/" style="font-size: 10px;">读书</a> <a href="/tags/赛车/" style="font-size: 10px;">赛车</a> <a href="/tags/转载/" style="font-size: 10px;">转载</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/20190113-jantalks/">2019年1月碎碎念</a>
          </li>
        
          <li>
            <a href="/2019/20190112-movies/">看了两场截然不同的电影</a>
          </li>
        
          <li>
            <a href="/2019/20190105-repost/">转载：一份多么美好的长期租约|张宇凌</a>
          </li>
        
          <li>
            <a href="/2019/2019-01-01-happynewyear/">又是新的一年</a>
          </li>
        
          <li>
            <a href="/2018/2018-04-15-tour-de-hyrule/">海拉鲁大陆旅行指南</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 youngspring1<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>